(self.webpackChunkyoutube_client=self.webpackChunkyoutube_client||[]).push([[82],{9082:(t,r,e)=>{"use strict";e.r(r),e.d(r,{AuthModule:()=>C});var n=e(1116),o=e(6861),s=e(1041),a=e(3645),i=e(5366);let u=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-auth"]],decls:1,vars:0,template:function(t,r){1&t&&i._UZ(0,"router-outlet")},directives:[a.lC],styles:["[_nghost-%COMP%]{flex-grow:2;display:flex;justify-content:center;align-items:center}"]}),t})();var l=e(2797),c=e(7307),p=e(7570),m=e(1307),d=e(3070),g=e(9550),f=e(4369),h=e(7474);function w(t,r){1&t&&(i.TgZ(0,"mat-error"),i._uU(1," Please enter a valid username. "),i.qZA())}function _(t,r){1&t&&(i.TgZ(0,"mat-error"),i._uU(1," Username is required. "),i.qZA())}function Z(t,r){1&t&&(i.TgZ(0,"mat-error"),i._uU(1," Please enter a valid password. "),i.qZA())}function y(t,r){1&t&&(i.TgZ(0,"mat-error"),i._uU(1," Password is required. "),i.qZA())}function b(t,r){if(1&t){const t=i.EpF();i.ynx(0),i.TgZ(1,"form",2),i.NdJ("ngSubmit",function(){return i.CHM(t),i.oxw().onSubmit()}),i.TgZ(2,"mat-form-field",3),i.TgZ(3,"mat-label"),i._uU(4,"Username"),i.qZA(),i._UZ(5,"input",4),i.YNc(6,w,2,0,"mat-error",5),i.YNc(7,_,2,0,"mat-error",5),i.qZA(),i.TgZ(8,"mat-form-field",3),i.TgZ(9,"mat-label"),i._uU(10,"Password"),i.qZA(),i._UZ(11,"input",6),i.YNc(12,Z,2,0,"mat-error",5),i.YNc(13,y,2,0,"mat-error",5),i.qZA(),i.TgZ(14,"button",7),i._uU(15," Login "),i.qZA(),i.qZA(),i.BQk()}if(2&t){const t=i.oxw();i.xp6(1),i.Q6J("formGroup",t.loginFormGroup),i.xp6(5),i.Q6J("ngIf",(t.loginFormGroup.controls.username.hasError("username")||t.loginFormGroup.controls.username.hasError("whitespace"))&&!t.loginFormGroup.controls.username.hasError("required")),i.xp6(1),i.Q6J("ngIf",t.loginFormGroup.controls.username.hasError("required")),i.xp6(5),i.Q6J("ngIf",(t.loginFormGroup.controls.password.hasError("password")||t.loginFormGroup.controls.password.hasError("whitespace"))&&!t.loginFormGroup.controls.password.hasError("required")),i.xp6(1),i.Q6J("ngIf",t.loginFormGroup.controls.password.hasError("required"))}}function v(t,r){1&t&&i._UZ(0,"app-spinner")}let q=(()=>{class t{constructor(r,e,n){this.fb=r,this.authService=e,this.router=n,this.formData={username:null,password:null},this.loginFormGroup=this.fb.group({username:[null,[s.kI.required,t.noWhitespaceValidator,t.usernameValidator]],password:[null,[s.kI.required,t.noWhitespaceValidator,t.passwordValidator]]}),this.isLoading=!0,this.subscriptions=new p.w,this.subscriptions.add(this.loginFormGroup.valueChanges.subscribe(t=>this.formData=t))}ngOnInit(){this.isLoading=!0,this.authService.isAuthorized()?this.router.navigate(["youtube"]):this.isLoading=!1}ngOnDestroy(){this.subscriptions.unsubscribe()}onSubmit(){const{password:t,username:r}=this.formData;!this.doControlsHaveAnyErrors()&&t&&r&&(this.authService.register({username:r,userId:""}),this.isLoading=!0,this.router.navigate(["youtube"]))}doControlsHaveAnyErrors(){return Object.values(this.loginFormGroup.controls).every(t=>!!t.errors)}static noWhitespaceValidator(t){return 0===(t.value||"").trim().length?{whitespace:!0}:null}static passwordValidator(t){const r=(t.value||"").trim().includes(" "),e=(t.value||"").match(new RegExp("[A-Za-z0-9]{3,}"));return!r&&e?null:{password:!0}}static usernameValidator(t){return(t.value||"").match(new RegExp("[A-Za-z]{3,}"))?null:{username:!0}}}return t.\u0275fac=function(r){return new(r||t)(i.Y36(s.qu),i.Y36(m.e),i.Y36(a.F0))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-login-form"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["spinner",""],[1,"login-form",3,"formGroup","ngSubmit"],[1,"login-form__field"],["type","text","autocomplete","off","matInput","","formControlName","username","maxlength","10"],[4,"ngIf"],["type","password","autocomplete","off","matInput","","formControlName","password","maxlength","10"],["mat-button","","type","submit",1,"login-form__button_submit"]],template:function(t,r){if(1&t&&(i.YNc(0,b,16,5,"ng-container",0),i.YNc(1,v,1,0,"ng-template",null,1,i.W1O)),2&t){const t=i.MAs(2);i.Q6J("ngIf",!r.isLoading)("ngIfElse",t)}},directives:[n.O5,s._Y,s.JL,s.sg,d.KE,d.hX,g.Nt,s.Fj,s.JJ,s.u,s.nD,f.lW,d.TO,h.O],styles:[".login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:100%;margin:auto;padding:25px 0}.login-form__field[_ngcontent-%COMP%]{width:50%;margin:0 auto 15px}.login-form__button_submit[_ngcontent-%COMP%]{width:150px;margin:auto}"]}),t})(),x=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-auth-card"]],decls:8,vars:0,consts:[[1,"auth-card"],[1,"auth-card__header"]],template:function(t,r){1&t&&(i.TgZ(0,"mat-card",0),i.TgZ(1,"mat-card-header",1),i.TgZ(2,"mat-icon"),i._uU(3,"login"),i.qZA(),i.TgZ(4,"mat-card-title"),i._uU(5,"Login"),i.qZA(),i.qZA(),i.TgZ(6,"mat-card-content"),i._UZ(7,"app-login-form"),i.qZA(),i.qZA())},directives:[l.a8,l.dk,c.Hw,l.n5,l.dn,q],styles:[".auth-card[_ngcontent-%COMP%]{width:500px;margin:auto}.auth-card__header[_ngcontent-%COMP%]{display:flex;justify-content:center}"]}),t})();const A=[{path:"",component:u,children:[{path:"login",component:(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-login-page"]],decls:1,vars:0,template:function(t,r){1&t&&i._UZ(0,"app-auth-card")},directives:[x],styles:["[_nghost-%COMP%]{flex-grow:2;display:flex;justify-content:center;align-items:center}"]}),t})()},{path:"404",component:(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-not-found-page"]],decls:4,vars:0,template:function(t,r){1&t&&(i.TgZ(0,"mat-icon"),i._uU(1,"flutter_dash"),i.qZA(),i.TgZ(2,"p"),i._uU(3,"Sorry, smth went wrong(("),i.qZA())},directives:[c.Hw],styles:["[_nghost-%COMP%]{flex-grow:2;display:flex;justify-content:center;align-items:center}"]}),t})()},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",redirectTo:"./404"}]}];let T=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[a.Bz.forChild(A)],a.Bz]}),t})();var U=e(5425);let C=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[n.ez,U.m,s.u5,s.UX,o.q,T]]}),t})()}}]);